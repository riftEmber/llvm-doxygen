<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::SimpleLoopUnswitchPass Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;11.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="classllvm_1_1SimpleLoopUnswitchPass.html">SimpleLoopUnswitchPass</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classllvm_1_1SimpleLoopUnswitchPass-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">llvm::SimpleLoopUnswitchPass Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This pass transforms loops that contain branches or switches on loop- invariant conditions to have multiple loops.  
 <a href="#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="SimpleLoopUnswitch_8h_source.html">llvm/Transforms/Scalar/SimpleLoopUnswitch.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for llvm::SimpleLoopUnswitchPass:</div>
<div class="dyncontent">
<div class="center"><img src="classllvm_1_1SimpleLoopUnswitchPass__inherit__graph.png" border="0" usemap="#allvm_1_1SimpleLoopUnswitchPass_inherit__map" alt="Inheritance graph"/></div>
<map name="allvm_1_1SimpleLoopUnswitchPass_inherit__map" id="allvm_1_1SimpleLoopUnswitchPass_inherit__map">
<area shape="rect" title="This pass transforms loops that contain branches or switches on loop&#45; invariant conditions to have mu..." alt="" coords="5,199,212,225"/>
<area shape="rect" href="structllvm_1_1PassInfoMixin.html" title=" " alt="" coords="9,109,208,150"/>
<area shape="poly" title=" " alt="" coords="111,165,111,199,106,199,106,165"/>
<area shape="rect" href="structllvm_1_1PassInfoMixin.html" title="A CRTP mix&#45;in to automatically provide informational APIs needed for passes." alt="" coords="40,5,177,46"/>
<area shape="poly" title=" " alt="" coords="111,61,111,109,106,109,106,61"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for llvm::SimpleLoopUnswitchPass:</div>
<div class="dyncontent">
<div class="center"><img src="classllvm_1_1SimpleLoopUnswitchPass__coll__graph.png" border="0" usemap="#allvm_1_1SimpleLoopUnswitchPass_coll__map" alt="Collaboration graph"/></div>
<map name="allvm_1_1SimpleLoopUnswitchPass_coll__map" id="allvm_1_1SimpleLoopUnswitchPass_coll__map">
<area shape="rect" title="This pass transforms loops that contain branches or switches on loop&#45; invariant conditions to have mu..." alt="" coords="5,199,212,225"/>
<area shape="rect" href="structllvm_1_1PassInfoMixin.html" title=" " alt="" coords="9,109,208,150"/>
<area shape="poly" title=" " alt="" coords="111,165,111,199,106,199,106,165"/>
<area shape="rect" href="structllvm_1_1PassInfoMixin.html" title="A CRTP mix&#45;in to automatically provide informational APIs needed for passes." alt="" coords="40,5,177,46"/>
<area shape="poly" title=" " alt="" coords="111,61,111,109,106,109,106,61"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acf415fe15c8596405c622d05aad6c151" id="r_acf415fe15c8596405c622d05aad6c151"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acf415fe15c8596405c622d05aad6c151">SimpleLoopUnswitchPass</a> (<a class="el" href="classbool.html">bool</a> NonTrivial=false)</td></tr>
<tr class="separator:acf415fe15c8596405c622d05aad6c151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7088b7b5c8bd069497f13e3e1990eff" id="r_ae7088b7b5c8bd069497f13e3e1990eff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae7088b7b5c8bd069497f13e3e1990eff">run</a> (<a class="el" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="el" href="namespacellvm.html#a58dde534a0ea2a23cb6c779c5c283f75">LoopAnalysisManager</a> &amp;AM, <a class="el" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;AR, <a class="el" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;U)</td></tr>
<tr class="separator:ae7088b7b5c8bd069497f13e3e1990eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_structllvm_1_1PassInfoMixin"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_static_methods_structllvm_1_1PassInfoMixin')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="structllvm_1_1PassInfoMixin.html">llvm::PassInfoMixin&lt; SimpleLoopUnswitchPass &gt;</a></td></tr>
<tr class="memitem:a630e2eac0694bcbcfed653c6a7f616e3 inherit pub_static_methods_structllvm_1_1PassInfoMixin" id="r_a630e2eac0694bcbcfed653c6a7f616e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1ilist__node__impl.html">static</a> <a class="el" href="classllvm_1_1StringRef.html">StringRef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1PassInfoMixin.html#a630e2eac0694bcbcfed653c6a7f616e3">name</a> ()</td></tr>
<tr class="memdesc:a630e2eac0694bcbcfed653c6a7f616e3 inherit pub_static_methods_structllvm_1_1PassInfoMixin"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the name of the pass we are mixed into.  <br /></td></tr>
<tr class="separator:a630e2eac0694bcbcfed653c6a7f616e3 inherit pub_static_methods_structllvm_1_1PassInfoMixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This pass transforms loops that contain branches or switches on loop- invariant conditions to have multiple loops. </p>
<p>For example, it turns the left into the right code:</p>
<p>for (...) if (lic) A for (...) if (lic) A; B; C B else C for (...) A; C</p>
<p>This can increase the size of the code exponentially (doubling it every time a loop is unswitched) so we only unswitch if the resultant code will be smaller than a threshold.</p>
<p>This pass expects LICM to be run before it to hoist invariant conditions out of the loop, to make the unswitching opportunity obvious.</p>
<p>There is a taxonomy of unswitching that we use to classify different forms of this transformaiton:</p>
<ul>
<li>Trival unswitching: this is when the condition can be unswitched without cloning any code from inside the loop. A non-trivial unswitch requires code duplication.</li>
<li>Full unswitching: this is when the branch or switch is completely moved from inside the loop to outside the loop. Partial unswitching removes the branch from the clone of the loop but must leave a (somewhat simplified) branch in the original loop. While theoretically partial unswitching can be done for switches, the requirements are extreme - we need the loop invariant input to the switch to be sufficient to collapse to a single successor in each clone.</li>
</ul>
<p>This pass always does trivial, full unswitching for both branches and switches. For branches, it also always does trivial, partial unswitching.</p>
<p>If enabled (via the constructor's <code>NonTrivial</code> parameter), this pass will additionally do non-trivial, full unswitching for branches and switches, and will do non-trivial, partial unswitching for branches.</p>
<p>Because partial unswitching of switches is extremely unlikely to be possible in practice and significantly complicates the implementation, this pass does not currently implement that in any mode. </p>

<p class="definition">Definition at line <a class="el" href="SimpleLoopUnswitch_8h_source.html#l00062">62</a> of file <a class="el" href="SimpleLoopUnswitch_8h_source.html">SimpleLoopUnswitch.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acf415fe15c8596405c622d05aad6c151" name="acf415fe15c8596405c622d05aad6c151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf415fe15c8596405c622d05aad6c151">&#9670;&#160;</a></span>SimpleLoopUnswitchPass()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::SimpleLoopUnswitchPass::SimpleLoopUnswitchPass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>NonTrivial</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SimpleLoopUnswitch_8h_source.html#l00066">66</a> of file <a class="el" href="SimpleLoopUnswitch_8h_source.html">SimpleLoopUnswitch.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae7088b7b5c8bd069497f13e3e1990eff" name="ae7088b7b5c8bd069497f13e3e1990eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7088b7b5c8bd069497f13e3e1990eff">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> SimpleLoopUnswitchPass::run </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Loop.html">Loop</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>L</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacellvm.html#a58dde534a0ea2a23cb6c779c5c283f75">LoopAnalysisManager</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>AM</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structllvm_1_1LoopStandardAnalysisResults.html">LoopStandardAnalysisResults</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>AR</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1LPMUpdater.html">LPMUpdater</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>U</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SimpleLoopUnswitch_8cpp_source.html#l02882">2882</a> of file <a class="el" href="SimpleLoopUnswitch_8cpp_source.html">SimpleLoopUnswitch.cpp</a>.</p>

<p class="reference">References <a class="el" href="LoopAnalysisManager_8h_source.html#l00054">llvm::LoopStandardAnalysisResults::AC</a>, <a class="el" href="PassManager_8h_source.html#l00160">llvm::PreservedAnalyses::all()</a>, <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="Debug_8cpp_source.html#l00132">llvm::dbgs()</a>, <a class="el" href="LoopAnalysisManager_8h_source.html#l00055">llvm::LoopStandardAnalysisResults::DT</a>, <a class="el" href="MD5_8cpp_source.html#l00056">F</a>, <a class="el" href="LoopInfo_8h_source.html#l00104">llvm::LoopBase&lt; BlockT, LoopT &gt;::getHeader()</a>, <a class="el" href="LoopAnalysisManager_8cpp_source.html#l00139">llvm::getLoopPassPreservedAnalyses()</a>, <a class="el" href="LoopInfo_8h_source.html#l00846">llvm::Loop::getName()</a>, <a class="el" href="BasicBlock_8h_source.html#l00107">llvm::BasicBlock::getParent()</a>, <a class="el" href="LoopAnalysisManager_8h_source.html#l00056">llvm::LoopStandardAnalysisResults::LI</a>, <a class="el" href="Debug_8h_source.html#l00122">LLVM_DEBUG</a>, <a class="el" href="LoopAnalysisManager_8h_source.html#l00060">llvm::LoopStandardAnalysisResults::MSSA</a>, <a class="el" href="LoopAnalysisManager_8h_source.html#l00057">llvm::LoopStandardAnalysisResults::SE</a>, <a class="el" href="LoopAnalysisManager_8h_source.html#l00059">llvm::LoopStandardAnalysisResults::TTI</a>, <a class="el" href="SimpleLoopUnswitch_8cpp_source.html#l02840">unswitchLoop()</a>, <a class="el" href="GenericDomTree_8h_source.html#l00771">llvm::DominatorTreeBase&lt; NodeT, IsPostDom &gt;::verify()</a>, <a class="el" href="MemorySSA_8cpp_source.html#l01873">llvm::MemorySSA::verifyMemorySSA()</a>, and <a class="el" href="MemorySSA_8cpp_source.html#l00084">llvm::VerifyMemorySSA</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/llvm/Transforms/Scalar/<a class="el" href="SimpleLoopUnswitch_8h_source.html">SimpleLoopUnswitch.h</a></li>
<li>lib/Transforms/Scalar/<a class="el" href="SimpleLoopUnswitch_8cpp_source.html">SimpleLoopUnswitch.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 20 2024 14:03:37 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
