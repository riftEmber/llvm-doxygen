<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;19.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Implementation of BLAKE3, originating from <a href="https://github.com/BLAKE3-team/BLAKE3/tree/1.3.1/c">https://github.com/BLAKE3-team/BLAKE3/tree/1.3.1/c</a></p>
<h1><a class="anchor" id="autotoc_md72"></a>
Example</h1>
<p>An example program that hashes bytes from standard input and prints the result:</p>
<p>Using the C++ API:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="BLAKE3_8h.html">llvm/Support/BLAKE3.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <span class="comment">// Initialize the hasher.</span></div>
<div class="line">  <a class="code hl_class" href="classllvm_1_1BLAKE3.html">llvm::BLAKE3</a> hasher;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Read input bytes from stdin.</span></div>
<div class="line">  <span class="keywordtype">char</span> buf[65536];</div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    ssize_t n = read(STDIN_FILENO, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">    <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">      hasher.<a class="code hl_function" href="classllvm_1_1BLAKE3.html#ad247de2450380eeba2fab0e794d5e44f">update</a>(<a class="code hl_class" href="classllvm_1_1StringRef.html">llvm::StringRef</a>(buf, n));</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n == 0) {</div>
<div class="line">      <span class="keywordflow">break</span>; <span class="comment">// end of file</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;read failed: %s\n&quot;</span>, strerror(errno));</div>
<div class="line">      exit(1);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Finalize the hash. Default output length is 32 bytes.</span></div>
<div class="line">  <span class="keyword">auto</span> output = hasher.<a class="code hl_function" href="classllvm_1_1BLAKE3.html#a006c25a3aced3ec5ff196b8141161592">final</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Print the hash as hexadecimal.</span></div>
<div class="line">  <span class="keywordflow">for</span> (uint8_t <span class="keywordtype">byte</span> : output) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;%02x&quot;</span>, <span class="keywordtype">byte</span>);</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aBLAKE3_8h_html"><div class="ttname"><a href="BLAKE3_8h.html">BLAKE3.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BLAKE3_html"><div class="ttname"><a href="classllvm_1_1BLAKE3.html">llvm::BLAKE3</a></div><div class="ttdoc">A class that wraps the BLAKE3 algorithm.</div><div class="ttdef"><b>Definition</b> <a href="BLAKE3_8h_source.html#l00038">BLAKE3.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1BLAKE3_html_a006c25a3aced3ec5ff196b8141161592"><div class="ttname"><a href="classllvm_1_1BLAKE3.html#a006c25a3aced3ec5ff196b8141161592">llvm::BLAKE3::final</a></div><div class="ttdeci">void final(BLAKE3Result&lt; NumBytes &gt; &amp;Result)</div><div class="ttdoc">Finalize the hasher and put the result in Result.</div><div class="ttdef"><b>Definition</b> <a href="BLAKE3_8h_source.html#l00059">BLAKE3.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1BLAKE3_html_ad247de2450380eeba2fab0e794d5e44f"><div class="ttname"><a href="classllvm_1_1BLAKE3.html#ad247de2450380eeba2fab0e794d5e44f">llvm::BLAKE3::update</a></div><div class="ttdeci">void update(ArrayRef&lt; uint8_t &gt; Data)</div><div class="ttdoc">Digest more data.</div><div class="ttdef"><b>Definition</b> <a href="BLAKE3_8h_source.html#l00046">BLAKE3.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
</div><!-- fragment --><p>Using the C API:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="blake3_8h.html">llvm-c/blake3.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <span class="comment">// Initialize the hasher.</span></div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> hasher;</div>
<div class="line">  <a class="code hl_function" href="blake3_8h.html#a8a051c13b70081b426f0c0693e6977af">llvm_blake3_hasher_init</a>(&amp;hasher);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Read input bytes from stdin.</span></div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> buf[65536];</div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    ssize_t n = read(STDIN_FILENO, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line">    <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line">      <a class="code hl_function" href="blake3_8h.html#a75e25f25c6fc1db9056087bbc458a0bc">llvm_blake3_hasher_update</a>(&amp;hasher, buf, n);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n == 0) {</div>
<div class="line">      <span class="keywordflow">break</span>; <span class="comment">// end of file</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;read failed: %s\n&quot;</span>, strerror(errno));</div>
<div class="line">      exit(1);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Finalize the hash. LLVM_BLAKE3_OUT_LEN is the default output length, 32 bytes.</span></div>
<div class="line">  uint8_t output[<a class="code hl_define" href="blake3_8h.html#a9a7048b8a78d415916d028f4b8477cc3">LLVM_BLAKE3_OUT_LEN</a>];</div>
<div class="line">  <a class="code hl_function" href="blake3_8h.html#a269ade5376073ccdb1307a0daddaa1de">llvm_blake3_hasher_finalize</a>(&amp;hasher, output, <a class="code hl_define" href="blake3_8h.html#a9a7048b8a78d415916d028f4b8477cc3">LLVM_BLAKE3_OUT_LEN</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Print the hash as hexadecimal.</span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_define" href="blake3_8h.html#a9a7048b8a78d415916d028f4b8477cc3">LLVM_BLAKE3_OUT_LEN</a>; i++) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;%02x&quot;</span>, output[i]);</div>
<div class="line">  }</div>
<div class="line">  printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="ablake3_8h_html"><div class="ttname"><a href="blake3_8h.html">blake3.h</a></div></div>
<div class="ttc" id="ablake3_8h_html_a269ade5376073ccdb1307a0daddaa1de"><div class="ttname"><a href="blake3_8h.html#a269ade5376073ccdb1307a0daddaa1de">llvm_blake3_hasher_finalize</a></div><div class="ttdeci">void llvm_blake3_hasher_finalize(const llvm_blake3_hasher *self, uint8_t *out, size_t out_len)</div></div>
<div class="ttc" id="ablake3_8h_html_a75e25f25c6fc1db9056087bbc458a0bc"><div class="ttname"><a href="blake3_8h.html#a75e25f25c6fc1db9056087bbc458a0bc">llvm_blake3_hasher_update</a></div><div class="ttdeci">void llvm_blake3_hasher_update(llvm_blake3_hasher *self, const void *input, size_t input_len)</div></div>
<div class="ttc" id="ablake3_8h_html_a8a051c13b70081b426f0c0693e6977af"><div class="ttname"><a href="blake3_8h.html#a8a051c13b70081b426f0c0693e6977af">llvm_blake3_hasher_init</a></div><div class="ttdeci">void llvm_blake3_hasher_init(llvm_blake3_hasher *self)</div></div>
<div class="ttc" id="ablake3_8h_html_a9a7048b8a78d415916d028f4b8477cc3"><div class="ttname"><a href="blake3_8h.html#a9a7048b8a78d415916d028f4b8477cc3">LLVM_BLAKE3_OUT_LEN</a></div><div class="ttdeci">#define LLVM_BLAKE3_OUT_LEN</div><div class="ttdef"><b>Definition</b> <a href="blake3_8h_source.html#l00029">blake3.h:29</a></div></div>
<div class="ttc" id="astructllvm__blake3__hasher_html"><div class="ttname"><a href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a></div><div class="ttdef"><b>Definition</b> <a href="blake3_8h_source.html#l00045">blake3.h:45</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md73"></a>
API</h1>
<h2><a class="anchor" id="autotoc_md74"></a>
The Class/Struct</h2>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keyword">class </span>BLAKE3 {</div>
<div class="line">  <span class="comment">// API</span></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> Hasher;</div>
<div class="line">};</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">  <span class="comment">// private fields</span></div>
<div class="line">} <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a>;</div>
</div><!-- fragment --><p>An incremental BLAKE3 hashing state, which can accept any number of updates. This implementation doesn't allocate any heap memory, but <code>sizeof(llvm_blake3_hasher)</code> itself is relatively large, currently 1912 bytes on x86-64. This size can be reduced by restricting the maximum input length, as described in Section 5.4 of <a href="https://github.com/BLAKE3-team/BLAKE3-specs/blob/master/blake3.pdf">the BLAKE3 spec</a>, but this implementation doesn't currently support that strategy.</p>
<h2><a class="anchor" id="autotoc_md75"></a>
Common API Functions</h2>
<div class="fragment"><div class="line"> ++</div>
<div class="line">BLAKE3::BLAKE3();</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> BLAKE3::init();</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#a8a051c13b70081b426f0c0693e6977af">llvm_blake3_hasher_init</a>(</div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self);</div>
</div><!-- fragment --><p>Initialize a <code><a class="el" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a></code> in the default hashing mode.</p>
<hr  />
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keywordtype">void</span> BLAKE3::update(ArrayRef&lt;uint8_t&gt; Data);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> BLAKE3::update(StringRef Str);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#a75e25f25c6fc1db9056087bbc458a0bc">llvm_blake3_hasher_update</a>(</div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self,</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">void</span> *input,</div>
<div class="line">  <span class="keywordtype">size_t</span> input_len);</div>
</div><!-- fragment --><p>Add input to the hasher. This can be called any number of times.</p>
<hr  />
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> NumBytes = LLVM_BLAKE3_OUT_LEN&gt;</div>
<div class="line"><span class="keyword">using </span>BLAKE3Result = std::array&lt;uint8_t, NumBytes&gt;;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> NumBytes = LLVM_BLAKE3_OUT_LEN&gt;</div>
<div class="line"><span class="keywordtype">void</span> BLAKE3::final(BLAKE3Result&lt;NumBytes&gt; &amp;Result);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> NumBytes = LLVM_BLAKE3_OUT_LEN&gt;</div>
<div class="line">BLAKE3Result&lt;NumBytes&gt; BLAKE3::final();</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#a269ade5376073ccdb1307a0daddaa1de">llvm_blake3_hasher_finalize</a>(</div>
<div class="line">  <span class="keyword">const</span> <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self,</div>
<div class="line">  uint8_t *out,</div>
<div class="line">  <span class="keywordtype">size_t</span> out_len);</div>
</div><!-- fragment --><p>Finalize the hasher and return an output of any length, given in bytes. This doesn't modify the hasher itself, and it's possible to finalize again after adding more input. The constant <code>LLVM_BLAKE3_OUT_LEN</code> provides the default output length, 32 bytes, which is recommended for most callers.</p>
<p>Outputs shorter than the default length of 32 bytes (256 bits) provide less security. An N-bit BLAKE3 output is intended to provide N bits of first and second preimage resistance and N/2 bits of collision resistance, for any N up to 256. Longer outputs don't provide any additional security.</p>
<p>Shorter BLAKE3 outputs are prefixes of longer ones. Explicitly requesting a short output is equivalent to truncating the default-length output. (Note that this is different between BLAKE2 and BLAKE3.)</p>
<h2><a class="anchor" id="autotoc_md78"></a>
Less Common API Functions</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#aaf8dcf7da9729af05bec0662d3873280">llvm_blake3_hasher_init_keyed</a>(</div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self,</div>
<div class="line">  <span class="keyword">const</span> uint8_t key[<a class="code hl_define" href="blake3_8h.html#ac6e51ba539cfceb419c6ba3f03338b47">LLVM_BLAKE3_KEY_LEN</a>]);</div>
<div class="ttc" id="ablake3_8h_html_aaf8dcf7da9729af05bec0662d3873280"><div class="ttname"><a href="blake3_8h.html#aaf8dcf7da9729af05bec0662d3873280">llvm_blake3_hasher_init_keyed</a></div><div class="ttdeci">void llvm_blake3_hasher_init_keyed(llvm_blake3_hasher *self, const uint8_t key[LLVM_BLAKE3_KEY_LEN])</div></div>
<div class="ttc" id="ablake3_8h_html_ac6e51ba539cfceb419c6ba3f03338b47"><div class="ttname"><a href="blake3_8h.html#ac6e51ba539cfceb419c6ba3f03338b47">LLVM_BLAKE3_KEY_LEN</a></div><div class="ttdeci">#define LLVM_BLAKE3_KEY_LEN</div><div class="ttdef"><b>Definition</b> <a href="blake3_8h_source.html#l00028">blake3.h:28</a></div></div>
</div><!-- fragment --><p>Initialize a <code><a class="el" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a></code> in the keyed hashing mode. The key must be exactly 32 bytes.</p>
<hr  />
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#acd67a8b965297a5e15381f1fea23fce6">llvm_blake3_hasher_init_derive_key</a>(</div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self,</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *context);</div>
<div class="ttc" id="ablake3_8h_html_acd67a8b965297a5e15381f1fea23fce6"><div class="ttname"><a href="blake3_8h.html#acd67a8b965297a5e15381f1fea23fce6">llvm_blake3_hasher_init_derive_key</a></div><div class="ttdeci">void llvm_blake3_hasher_init_derive_key(llvm_blake3_hasher *self, const char *context)</div></div>
</div><!-- fragment --><p>Initialize a <code><a class="el" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a></code> in the key derivation mode. The context string is given as an initialization parameter, and afterwards input key material should be given with <code>llvm_blake3_hasher_update</code>. The context string is a null-terminated C string which should be <b>hardcoded, globally unique, and application-specific</b>. The context string should not include any dynamic input like salts, nonces, or identifiers read from a database at runtime. A good default format for the context string is <code>"[application] [commit timestamp] [purpose]"</code>, e.g., <code>"example.com
2019-12-25 16:18:03 session tokens v1"</code>.</p>
<p>This function is intended for application code written in C. For language bindings, see <code>llvm_blake3_hasher_init_derive_key_raw</code> below.</p>
<hr  />
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#ae9a8ac402d13484bcb44c12d572fecb8">llvm_blake3_hasher_init_derive_key_raw</a>(</div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self,</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">void</span> *context,</div>
<div class="line">  <span class="keywordtype">size_t</span> context_len);</div>
<div class="ttc" id="ablake3_8h_html_ae9a8ac402d13484bcb44c12d572fecb8"><div class="ttname"><a href="blake3_8h.html#ae9a8ac402d13484bcb44c12d572fecb8">llvm_blake3_hasher_init_derive_key_raw</a></div><div class="ttdeci">void llvm_blake3_hasher_init_derive_key_raw(llvm_blake3_hasher *self, const void *context, size_t context_len)</div></div>
</div><!-- fragment --><p>As <code>llvm_blake3_hasher_init_derive_key</code> above, except that the context string is given as a pointer to an array of arbitrary bytes with a provided length. This is intended for writing language bindings, where C string conversion would add unnecessary overhead and new error cases. Unicode strings should be encoded as UTF-8.</p>
<p>Application code in C should prefer <code>llvm_blake3_hasher_init_derive_key</code>, which takes the context as a C string. If you need to use arbitrary bytes as a context string in application code, consider whether you're violating the requirement that context strings should be hardcoded.</p>
<hr  />
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#ad3added645a514c2976352a72152c472">llvm_blake3_hasher_finalize_seek</a>(</div>
<div class="line">  <span class="keyword">const</span> <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self,</div>
<div class="line">  <a class="code hl_class" href="classuint64__t.html">uint64_t</a> seek,</div>
<div class="line">  uint8_t *out,</div>
<div class="line">  <span class="keywordtype">size_t</span> out_len);</div>
<div class="ttc" id="ablake3_8h_html_ad3added645a514c2976352a72152c472"><div class="ttname"><a href="blake3_8h.html#ad3added645a514c2976352a72152c472">llvm_blake3_hasher_finalize_seek</a></div><div class="ttdeci">void llvm_blake3_hasher_finalize_seek(const llvm_blake3_hasher *self, uint64_t seek, uint8_t *out, size_t out_len)</div></div>
<div class="ttc" id="aclassuint64__t_html"><div class="ttname"><a href="classuint64__t.html">uint64_t</a></div></div>
</div><!-- fragment --><p>The same as <code>llvm_blake3_hasher_finalize</code>, but with an additional <code>seek</code> parameter for the starting byte position in the output stream. To efficiently stream a large output without allocating memory, call this function in a loop, incrementing <code>seek</code> by the output length each time.</p>
<hr  />
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="blake3_8h.html#a368118adf27068d9bf7b8f34b8f9be7a">llvm_blake3_hasher_reset</a>(</div>
<div class="line">  <a class="code hl_struct" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a> *self);</div>
<div class="ttc" id="ablake3_8h_html_a368118adf27068d9bf7b8f34b8f9be7a"><div class="ttname"><a href="blake3_8h.html#a368118adf27068d9bf7b8f34b8f9be7a">llvm_blake3_hasher_reset</a></div><div class="ttdeci">void llvm_blake3_hasher_reset(llvm_blake3_hasher *self)</div></div>
</div><!-- fragment --><p>Reset the hasher to its initial state, prior to any calls to <code>llvm_blake3_hasher_update</code>. Currently this is no different from calling <code>llvm_blake3_hasher_init</code> or similar again. However, if this implementation gains multithreading support in the future, and if <code><a class="el" href="structllvm__blake3__hasher.html">llvm_blake3_hasher</a></code> holds (optional) threading resources, this function will reuse those resources.</p>
<h1><a class="anchor" id="autotoc_md83"></a>
Building</h1>
<p>This implementation is just C and assembly files.</p>
<h2><a class="anchor" id="autotoc_md84"></a>
x86</h2>
<p>Dynamic dispatch is enabled by default on x86. The implementation will query the CPU at runtime to detect SIMD support, and it will use the widest instruction set available. By default, <code><a class="el" href="blake3__dispatch_8c.html">blake3_dispatch.c</a></code> expects to be linked with code for five different instruction sets: portable C, SSE2, SSE4.1, AVX2, and AVX-512.</p>
<p>For each of the x86 SIMD instruction sets, four versions are available: three flavors of assembly (Unix, Windows MSVC, and Windows GNU) and one version using C intrinsics. The assembly versions are generally preferred. They perform better, they perform more consistently across different compilers, and they build more quickly. On the other hand, the assembly versions are x86_64-only, and you need to select the right flavor for your target platform.</p>
<h2><a class="anchor" id="autotoc_md85"></a>
ARM NEON</h2>
<p>The NEON implementation is enabled by default on AArch64, but not on other ARM targets, since not all of them support it. To enable it, set <code>BLAKE3_USE_NEON=1</code>.</p>
<p>To explicitiy disable using NEON instructions on AArch64, set <code>BLAKE3_USE_NEON=0</code>.</p>
<h2><a class="anchor" id="autotoc_md86"></a>
Other Platforms</h2>
<p>The portable implementation should work on most other architectures.</p>
<h1><a class="anchor" id="autotoc_md87"></a>
Multithreading</h1>
<p>The implementation doesn't currently support multithreading. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 1 2024 13:46:55 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
