<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::misexpect Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;16.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="namespacellvm_1_1misexpect.html">misexpect</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">llvm::misexpect Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a62ecd68a608ec120263975c279ae3dab" id="r_a62ecd68a608ec120263975c279ae3dab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62ecd68a608ec120263975c279ae3dab">checkBackendInstrumentation</a> (<a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="el" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt; <a class="el" href="classllvm_1_1ilist__node__impl.html">RealWeights</a>)</td></tr>
<tr class="memdesc:a62ecd68a608ec120263975c279ae3dab"><td class="mdescLeft">&#160;</td><td class="mdescRight">checkBackendInstrumentation - compares PGO counters to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range.  <br /></td></tr>
<tr class="separator:a62ecd68a608ec120263975c279ae3dab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21de4796e674d8dabcea69242abe5005" id="r_a21de4796e674d8dabcea69242abe5005"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21de4796e674d8dabcea69242abe5005">checkFrontendInstrumentation</a> (<a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="el" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt; <a class="el" href="classllvm_1_1ilist__node__impl.html">ExpectedWeights</a>)</td></tr>
<tr class="memdesc:a21de4796e674d8dabcea69242abe5005"><td class="mdescLeft">&#160;</td><td class="mdescRight">checkFrontendInstrumentation - compares PGO counters to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range.  <br /></td></tr>
<tr class="separator:a21de4796e674d8dabcea69242abe5005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8677c5d2618fcf52eda43f5530decb6b" id="r_a8677c5d2618fcf52eda43f5530decb6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8677c5d2618fcf52eda43f5530decb6b">verifyMisExpect</a> (<a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="el" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt; <a class="el" href="classllvm_1_1ilist__node__impl.html">RealWeights</a>, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt; <a class="el" href="classllvm_1_1ilist__node__impl.html">ExpectedWeights</a>)</td></tr>
<tr class="memdesc:a8677c5d2618fcf52eda43f5530decb6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">veryifyMisExpect - compares RealWeights to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range.  <br /></td></tr>
<tr class="separator:a8677c5d2618fcf52eda43f5530decb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c52059f91406714507309d168ff95b8" id="r_a4c52059f91406714507309d168ff95b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c52059f91406714507309d168ff95b8">checkExpectAnnotations</a> (<a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="el" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt; <a class="el" href="classllvm_1_1ilist__node__impl.html">ExistingWeights</a>, <a class="el" href="classbool.html">bool</a> <a class="el" href="classllvm_1_1ilist__node__impl.html">IsFrontend</a>)</td></tr>
<tr class="memdesc:a4c52059f91406714507309d168ff95b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">checkExpectAnnotations - compares PGO counters to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range.  <br /></td></tr>
<tr class="separator:a4c52059f91406714507309d168ff95b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a62ecd68a608ec120263975c279ae3dab" name="a62ecd68a608ec120263975c279ae3dab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ecd68a608ec120263975c279ae3dab">&#9670;&#160;</a></span>checkBackendInstrumentation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a> llvm::misexpect::checkBackendInstrumentation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>I</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>RealWeights</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checkBackendInstrumentation - compares PGO counters to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range. </p>
<p>It extracts the expected weights from the MD_prof weights attatched to the instruction, which are are assumed to come from lowered llvm.expect intrinsics. The RealWeights parameter and the extracted expected weights are then passed to verifyMisexpect() for verification</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I</td><td>The <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> being checked </td></tr>
    <tr><td class="paramname">RealWeights</td><td>A vector of profile weights for each target block </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MisExpect_8cpp_source.html#l00186">186</a> of file <a class="el" href="MisExpect_8cpp_source.html">MisExpect.cpp</a>.</p>

<p class="reference">References <a class="el" href="ProfDataUtils_8cpp_source.html#l00122">llvm::extractBranchWeights()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, and <a class="el" href="MisExpect_8cpp_source.html#l00123">verifyMisExpect()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MisExpect_8cpp_source.html#l00202">checkExpectAnnotations()</a>.</p>

</div>
</div>
<a id="a4c52059f91406714507309d168ff95b8" name="a4c52059f91406714507309d168ff95b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c52059f91406714507309d168ff95b8">&#9670;&#160;</a></span>checkExpectAnnotations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a> llvm::misexpect::checkExpectAnnotations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>I</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>ExistingWeights</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>IsFrontend</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checkExpectAnnotations - compares PGO counters to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range. </p>
<p>It extracts the expected weights from the MD_prof weights attatched to the instruction, which are are assumed to come from lowered llvm.expect intrinsics. The RealWeights parameter and the extracted expected weights are then passed to verifyMisexpect() for verification. It is a thin wrapper around the checkFrontendInstrumentation and checkBackendInstrumentation APIs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I</td><td>The <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> being checked </td></tr>
    <tr><td class="paramname">ExistingWeights</td><td>A vector of profile weights for each target block </td></tr>
    <tr><td class="paramname">IsFrontend</td><td>A boolean describing if this is Frontend instrumentation </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MisExpect_8cpp_source.html#l00202">202</a> of file <a class="el" href="MisExpect_8cpp_source.html">MisExpect.cpp</a>.</p>

<p class="reference">References <a class="el" href="MisExpect_8cpp_source.html#l00186">checkBackendInstrumentation()</a>, <a class="el" href="MisExpect_8cpp_source.html#l00194">checkFrontendInstrumentation()</a>, and <a class="el" href="MD5_8cpp_source.html#l00058">I</a>.</p>

<p class="reference">Referenced by <a class="el" href="LowerExpectIntrinsic_8cpp_source.html#l00079">handleSwitchExpect()</a>, and <a class="el" href="PGOInstrumentation_8cpp_source.html#l02296">llvm::setProfMetadata()</a>.</p>

</div>
</div>
<a id="a21de4796e674d8dabcea69242abe5005" name="a21de4796e674d8dabcea69242abe5005"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21de4796e674d8dabcea69242abe5005">&#9670;&#160;</a></span>checkFrontendInstrumentation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a> llvm::misexpect::checkFrontendInstrumentation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>I</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>ExpectedWeights</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checkFrontendInstrumentation - compares PGO counters to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range. </p>
<p>It extracts the expected weights from the MD_prof weights attatched to the instruction, which are are assumed to come from profiling data attached by the frontend prior to llvm.expect intrinsic lowering. The ExpectedWeights parameter and the extracted real weights are then passed to verifyMisexpect() for verification</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I</td><td>The <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> being checked </td></tr>
    <tr><td class="paramname">ExpectedWeights</td><td>A vector of the expected weights for each target block, this determines the threshold values used when emiting diagnostics </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MisExpect_8cpp_source.html#l00194">194</a> of file <a class="el" href="MisExpect_8cpp_source.html">MisExpect.cpp</a>.</p>

<p class="reference">References <a class="el" href="ProfDataUtils_8cpp_source.html#l00122">llvm::extractBranchWeights()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, and <a class="el" href="MisExpect_8cpp_source.html#l00123">verifyMisExpect()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MisExpect_8cpp_source.html#l00202">checkExpectAnnotations()</a>, and <a class="el" href="LowerExpectIntrinsic_8cpp_source.html#l00280">handleBrSelExpect()</a>.</p>

</div>
</div>
<a id="a8677c5d2618fcf52eda43f5530decb6b" name="a8677c5d2618fcf52eda43f5530decb6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8677c5d2618fcf52eda43f5530decb6b">&#9670;&#160;</a></span>verifyMisExpect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1ilist__node__impl.html">void</a> llvm::misexpect::verifyMisExpect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>I</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>RealWeights</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classuint32__t.html">uint32_t</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>ExpectedWeights</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>veryifyMisExpect - compares RealWeights to the thresholds used for llvm.expect and warns if the PGO counters are outside of the expected range. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">I</td><td>The <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> being checked </td></tr>
    <tr><td class="paramname">RealWeights</td><td>A vector of profile weights from the profile data </td></tr>
    <tr><td class="paramname">ExpectedWeights</td><td>A vector of the weights attatch by llvm.expect </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MisExpect_8cpp_source.html#l00123">123</a> of file <a class="el" href="MisExpect_8cpp_source.html">MisExpect.cpp</a>.</p>

<p class="reference">References <a class="el" href="BranchProbability_8cpp_source.html#l00053">llvm::BranchProbability::getBranchProbability()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, <a class="el" href="DeadArgumentElimination_8cpp_source.html#l00347">Idx</a>, <a class="el" href="LowerExpectIntrinsic_8cpp.html#aae93c90b6047163d33af8cc1bd57a193">LikelyBranchWeight</a>, and <a class="el" href="LowerExpectIntrinsic_8cpp.html#a351a1280d0bfece4f72e806eba12d284">UnlikelyBranchWeight</a>.</p>

<p class="reference">Referenced by <a class="el" href="MisExpect_8cpp_source.html#l00186">checkBackendInstrumentation()</a>, and <a class="el" href="MisExpect_8cpp_source.html#l00194">checkFrontendInstrumentation()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 20 2024 23:04:55 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
