<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::orc::COFFVCRuntimeBootstrapper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;16.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="namespacellvm_1_1orc.html">orc</a></li><li class="navelem"><a class="el" href="classllvm_1_1orc_1_1COFFVCRuntimeBootstrapper.html">COFFVCRuntimeBootstrapper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classllvm_1_1orc_1_1COFFVCRuntimeBootstrapper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">llvm::orc::COFFVCRuntimeBootstrapper Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Bootstraps the vc runtime within jitdylibs.  
 <a href="#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="COFFVCRuntimeSupport_8h_source.html">llvm/ExecutionEngine/Orc/COFFVCRuntimeSupport.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa199c65cb56c64b00e7cb294bee41fbd" id="r_aa199c65cb56c64b00e7cb294bee41fbd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1Expected.html">Expected</a>&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa199c65cb56c64b00e7cb294bee41fbd">loadStaticVCRuntime</a> (<a class="el" href="classllvm_1_1orc_1_1JITDylib.html">JITDylib</a> &amp;JD, <a class="el" href="classbool.html">bool</a> <a class="el" href="classllvm_1_1ilist__node__impl.html">DebugVersion</a>=false)</td></tr>
<tr class="memdesc:aa199c65cb56c64b00e7cb294bee41fbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds symbol definitions of static version of msvc runtime libraries.  <br /></td></tr>
<tr class="separator:aa199c65cb56c64b00e7cb294bee41fbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44ab952b63e5c304c8ea532a7dd01b1" id="r_ae44ab952b63e5c304c8ea532a7dd01b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1Error.html">Error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae44ab952b63e5c304c8ea532a7dd01b1">initializeStaticVCRuntime</a> (<a class="el" href="classllvm_1_1orc_1_1JITDylib.html">JITDylib</a> &amp;JD)</td></tr>
<tr class="memdesc:ae44ab952b63e5c304c8ea532a7dd01b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the initializer of static version of msvc runtime libraries.  <br /></td></tr>
<tr class="separator:ae44ab952b63e5c304c8ea532a7dd01b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d58003ec0ce1138761122939c20d7a" id="r_ad4d58003ec0ce1138761122939c20d7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1Expected.html">Expected</a>&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4d58003ec0ce1138761122939c20d7a">loadDynamicVCRuntime</a> (<a class="el" href="classllvm_1_1orc_1_1JITDylib.html">JITDylib</a> &amp;JD, <a class="el" href="classbool.html">bool</a> <a class="el" href="classllvm_1_1ilist__node__impl.html">DebugVersion</a>=false)</td></tr>
<tr class="memdesc:ad4d58003ec0ce1138761122939c20d7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds symbol definitions of dynamic versino of msvc runtie libraries.  <br /></td></tr>
<tr class="separator:ad4d58003ec0ce1138761122939c20d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a86d3eff3f2d3dfad1bfb2f8ffa8d332b" id="r_a86d3eff3f2d3dfad1bfb2f8ffa8d332b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1ilist__node__impl.html">static</a> <a class="el" href="classllvm_1_1Expected.html">Expected</a>&lt; std::unique_ptr&lt; <a class="el" href="classllvm_1_1orc_1_1COFFVCRuntimeBootstrapper.html">COFFVCRuntimeBootstrapper</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86d3eff3f2d3dfad1bfb2f8ffa8d332b">Create</a> (<a class="el" href="classllvm_1_1orc_1_1ExecutionSession.html">ExecutionSession</a> &amp;ES, <a class="el" href="classllvm_1_1orc_1_1ObjectLinkingLayer.html">ObjectLinkingLayer</a> &amp;ObjLinkingLayer, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classchar.html">char</a> *RuntimePath=<a class="el" href="classllvm_1_1ilist__node__impl.html">nullptr</a>)</td></tr>
<tr class="memdesc:a86d3eff3f2d3dfad1bfb2f8ffa8d332b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to create a <a class="el" href="classllvm_1_1orc_1_1COFFVCRuntimeBootstrapper.html" title="Bootstraps the vc runtime within jitdylibs.">COFFVCRuntimeBootstrapper</a> instance.  <br /></td></tr>
<tr class="separator:a86d3eff3f2d3dfad1bfb2f8ffa8d332b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bootstraps the vc runtime within jitdylibs. </p>

<p class="definition">Definition at line <a class="el" href="COFFVCRuntimeSupport_8h_source.html#l00031">31</a> of file <a class="el" href="COFFVCRuntimeSupport_8h_source.html">COFFVCRuntimeSupport.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a86d3eff3f2d3dfad1bfb2f8ffa8d332b" name="a86d3eff3f2d3dfad1bfb2f8ffa8d332b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86d3eff3f2d3dfad1bfb2f8ffa8d332b">&#9670;&#160;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1Expected.html">Expected</a>&lt; std::unique_ptr&lt; <a class="el" href="classllvm_1_1orc_1_1COFFVCRuntimeBootstrapper.html">COFFVCRuntimeBootstrapper</a> &gt; &gt; COFFVCRuntimeBootstrapper::Create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1orc_1_1ExecutionSession.html">ExecutionSession</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ES</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1orc_1_1ObjectLinkingLayer.html">ObjectLinkingLayer</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>ObjLinkingLayer</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classchar.html">char</a> *</td>          <td class="paramname"><span class="paramname"><em>RuntimePath</em><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="classllvm_1_1ilist__node__impl.html">nullptr</a></span></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to create a <a class="el" href="classllvm_1_1orc_1_1COFFVCRuntimeBootstrapper.html" title="Bootstraps the vc runtime within jitdylibs.">COFFVCRuntimeBootstrapper</a> instance. </p>
<p>An optional RuntimePath can be given to specify the location of directory that contains all vc runtime library files such as ucrt.lib and msvcrt.lib. If not path was given, it will try to search the MSVC toolchain and Windows SDK installation and use the found library files automatically.</p>
<p>Note that depending on the build setting, a different library file must be used. In general, if vc runtime was statically linked to the object file that is to be jit-linked, LoadStaticVCRuntime and InitializeStaticVCRuntime must be used with libcmt.lib, libucrt.lib, libvcruntimelib. If vc runtime was dynamically linked LoadDynamicVCRuntime must be used along with msvcrt.lib, ucrt.lib, vcruntime.lib.</p>
<p>More information is on: <a href="https://docs.microsoft.com/en-us/cpp/c-runtime-library/crt-library-features">https://docs.microsoft.com/en-us/cpp/c-runtime-library/crt-library-features</a> </p>

<p class="definition">Definition at line <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html#l00023">23</a> of file <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html">COFFVCRuntimeSupport.cpp</a>.</p>

</div>
</div>
<a id="ae44ab952b63e5c304c8ea532a7dd01b1" name="ae44ab952b63e5c304c8ea532a7dd01b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44ab952b63e5c304c8ea532a7dd01b1">&#9670;&#160;</a></span>initializeStaticVCRuntime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1Error.html">Error</a> COFFVCRuntimeBootstrapper::initializeStaticVCRuntime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1orc_1_1JITDylib.html">JITDylib</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>JD</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the initializer of static version of msvc runtime libraries. </p>
<p>This must be called before calling any functions requiring c runtime (e.g. printf) within the jit session. Note that proper initialization of vc runtime requires ability of running static initializers. Cosider setting up <a class="el" href="classllvm_1_1orc_1_1COFFPlatform.html" title="Mediates between COFF initialization and ExecutionSession state.">COFFPlatform</a>. </p>

<p class="definition">Definition at line <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html#l00109">109</a> of file <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html">COFFVCRuntimeSupport.cpp</a>.</p>

<p class="reference">References <a class="el" href="ELFObjHandler_8cpp_source.html#l00079">Addr</a>, <a class="el" href="llvm_2ExecutionEngine_2Orc_2Core_8h_source.html#l01813">llvm::orc::JITDylib::define()</a>, <a class="el" href="JITSymbol_8h_source.html#l00085">llvm::JITSymbolFlags::Exported</a>, <a class="el" href="llvm_2ExecutionEngine_2Orc_2Core_8h_source.html#l01416">llvm::orc::ExecutionSession::getExecutorProcessControl()</a>, <a class="el" href="llvm_2ExecutionEngine_2Orc_2Core_8h_source.html#l01424">llvm::orc::ExecutionSession::intern()</a>, <a class="el" href="LookupAndRecordAddrs_8cpp_source.html#l00016">llvm::orc::lookupAndRecordAddrs()</a>, <a class="el" href="llvm_2ExecutionEngine_2Orc_2Core_8h_source.html#l00163">llvm::orc::makeJITDylibSearchOrder()</a>, <a class="el" href="classllvm_1_1orc_1_1ExecutorProcessControl.html#a1311188c70924fb09c232f055985e8ae">llvm::orc::ExecutorProcessControl::runAsIntFunction()</a>, <a class="el" href="classllvm_1_1orc_1_1ExecutorProcessControl.html#a7d1ee134a86d5409efdcf07e177bc1b9">llvm::orc::ExecutorProcessControl::runAsVoidFunction()</a>, <a class="el" href="namespacellvm_1_1orc.html#ac17672ae6b70c781cc77713e88d698eba84a8921b25f505d0d2077aeb5db4bc16">llvm::orc::Static</a>, <a class="el" href="llvm_2Support_2Error_8h_source.html#l00330">llvm::Error::success()</a>, and <a class="el" href="llvm_2ExecutionEngine_2Orc_2Core_8h_source.html#l00817">llvm::orc::symbolAliases()</a>.</p>

</div>
</div>
<a id="ad4d58003ec0ce1138761122939c20d7a" name="ad4d58003ec0ce1138761122939c20d7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d58003ec0ce1138761122939c20d7a">&#9670;&#160;</a></span>loadDynamicVCRuntime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1Expected.html">Expected</a>&lt; std::vector&lt; std::string &gt; &gt; COFFVCRuntimeBootstrapper::loadDynamicVCRuntime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1orc_1_1JITDylib.html">JITDylib</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>JD</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>DebugVersion</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds symbol definitions of dynamic versino of msvc runtie libraries. </p>

<p class="definition">Definition at line <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html#l00051">51</a> of file <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html">COFFVCRuntimeSupport.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef()</a>.</p>

</div>
</div>
<a id="aa199c65cb56c64b00e7cb294bee41fbd" name="aa199c65cb56c64b00e7cb294bee41fbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa199c65cb56c64b00e7cb294bee41fbd">&#9670;&#160;</a></span>loadStaticVCRuntime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1Expected.html">Expected</a>&lt; std::vector&lt; std::string &gt; &gt; COFFVCRuntimeBootstrapper::loadStaticVCRuntime </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1orc_1_1JITDylib.html">JITDylib</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>JD</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>DebugVersion</em><span class="paramdefsep"> = </span><span class="paramdefval">false</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds symbol definitions of static version of msvc runtime libraries. </p>

<p class="definition">Definition at line <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html#l00039">39</a> of file <a class="el" href="COFFVCRuntimeSupport_8cpp_source.html">COFFVCRuntimeSupport.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/llvm/ExecutionEngine/Orc/<a class="el" href="COFFVCRuntimeSupport_8h_source.html">COFFVCRuntimeSupport.h</a></li>
<li>lib/ExecutionEngine/Orc/<a class="el" href="COFFVCRuntimeSupport_8cpp_source.html">COFFVCRuntimeSupport.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 20 2024 23:04:59 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
